<h4>{{ _('TP-Link Smartplug Settings') }}</h4>
<table class="table table-condensed">
	<thead>
		<tr>
			<td>{{ _('Plug') }}</td>
			<td style="text-align:center">{{ _('Options') }}</td>
			<td style="text-align:center"><a href="#" class="btn btn-mini" data-bind="click: addPlug"><i class="fas fa-plus" aria-hidden="true"></i></a></td>
		</tr>
	</thead>
	<tbody data-bind="sortable: { data: settings.settings.plugins.tplinksmartplug.arrSmartplugs, options: { cancel: '.unsortable', handle: '.movePlug', axis:'y'} }">
		<tr data-bind="attr: {title: ip}">
			<td><span data-bind="text: label" /></td>
			<td style="text-align:center">
				<i class="far" data-bind="css: {'fa-check-square': automaticShutdownEnabled(),'fa-square': !automaticShutdownEnabled()}" title="{{ _('Automatic Power Off Enabled') }}" />
				<i class="far" data-bind="css: {'fa-check-square': displayWarning(),'fa-square': !displayWarning()}" title="{{ _('Warning Prompt') }}" />
				<i class="far" data-bind="css: {'fa-check-square': warnPrinting(),'fa-square': !warnPrinting()}" title="{{ _('Warn While Printing') }}" />
				<i class="far" data-bind="css: {'fa-check-square': thermal_runaway(),'fa-square': !thermal_runaway()}" title="{{ _('Thermal Runaway') }}" />
				<i class="far" data-bind="css: {'fa-check-square': autoConnect(),'fa-square': !autoConnect()}" title="{{ _('Auto Connect') }}" />
				<i class="far" data-bind="css: {'fa-check-square': autoDisconnect(),'fa-square': !autoDisconnect()}" title="{{ _('Auto Disconnect') }}" />
				<i class="far" data-bind="css: {'fa-check-square': gcodeEnabled(),'fa-square': !gcodeEnabled()}" title="{{ _('GCODE Trigger') }}" />
				<i class="far" data-bind="css: {'fa-check-square': sysCmdOn(),'fa-square': !sysCmdOn()}" title="{{ _('Run System Command On') }}" />
				<i class="far" data-bind="css: {'fa-check-square': sysCmdOff(),'fa-square': !sysCmdOff()}" title="{{ _('Run System Command Off') }}" /></td>
			<td style="text-align:center">
				<div class="btn-group">
					<a href="#" class="btn btn-mini movePlug"><i class="fas fa-arrows-alt" aria-hidden="true"></i></a>
					<a href="#" class="btn btn-mini" data-bind="click: $root.editPlug"><i class="fas fa-pencil-alt" aria-hidden="true"></i></a>
					<a href="#" class="btn btn-mini btn-danger" data-bind="click: $root.removePlug"><i class="fas fa-times" aria-hidden="true"></i></a>
				</div>
				</td>
		</tr>
	</tbody>
</table>

<div class="row-fluid">
	<div class="span6">
		<div class="control-group">
			<div class="controls">
				<label class="checkbox">
				<input type="checkbox" data-bind="checked: settings.settings.plugins.tplinksmartplug.thermal_runaway_monitoring" /> {{ _('Enable thermal runaway monitoring.') }}
				</label>
			</div>
		</div>
		<div class="control-group">
			<label class="control-label">{{ _('Max Bed Temp') }}</label>
			<div class="controls">
				<div class="input-append">
					<input type="number" min="0" class="input input-small" data-bind="value: settings.settings.plugins.tplinksmartplug.thermal_runaway_max_bed, enable: settings.settings.plugins.tplinksmartplug.thermal_runaway_monitoring()" disabled />
					<span class="add-on">{{ _('secs') }}</span>
				</div>
			</div>
			<label class="control-label">{{ _('Max Extruder Temp') }}</label>
			<div class="controls">
				<div class="input-append">
					<input type="number" min="0" class="input input-small" data-bind="value: settings.settings.plugins.tplinksmartplug.thermal_runaway_max_extruder, enable: settings.settings.plugins.tplinksmartplug.thermal_runaway_monitoring()" disabled />
					<span class="add-on">{{ _('secs') }}</span>
				</div>
			</div>
		</div>
		<div class="control-group">
			<div class="controls">
				<label class="checkbox">
				<input type="checkbox" data-bind="checked: settings.settings.plugins.tplinksmartplug.event_on_error_monitoring" /> {{ _('Enable error event monitoring.') }}
				</label>
			</div>
		</div>
		<div class="control-group">
			<div class="controls">
				<label class="checkbox">
				<input type="checkbox" data-bind="checked: settings.settings.plugins.tplinksmartplug.event_on_disconnect_monitoring" /> {{ _('Enable disconnect event monitoring.') }}
				</label>
			</div>
		</div>
		<div class="control-group">
			<div class="controls">
				<label class="checkbox">
				<input type="checkbox" data-bind="checked: settings.settings.plugins.tplinksmartplug.debug_logging"> {{ _('Enable debug logging.') }}
				</label>
			</div>
		</div>
		<div class="control-group">
			<div class="controls">
				<label class="checkbox">
				<input type="checkbox" data-bind="checked: settings.settings.plugins.tplinksmartplug.pollingEnabled" /> {{ _('Enable polling of status.') }}
				</label>
			</div>
		</div>
		<div class="control-group">
			<label class="control-label">{{ _('Polling Interval') }}</label>
			<div class="controls">
				<div class="input-append">
					<input type="number" min="0" class="input input-small" data-bind="value: settings.settings.plugins.tplinksmartplug.pollingInterval, enable: settings.settings.plugins.tplinksmartplug.pollingEnabled" disabled />
					<span class="add-on">{{ _('mins') }}</span>
				</div>
			</div>
		</div>
		<div class="control-group">
			<div class="controls">
				<label class="control-label">{{ _('Cost per kWh') }}</label>
				<input type="number" min="0" step="0.001" class="input input-small" data-bind="value: settings.settings.plugins.tplinksmartplug.cost_rate" />
			</div>
		</div>
	</div>
	<div class="span6">
		<div class="control-group">
			<div class="controls">
				<label class="checkbox">
				<input type="checkbox" data-bind="checked: settings.settings.plugins.tplinksmartplug.powerOffWhenIdle" /> {{ _('Power Off on Idle') }} <i class="icon icon-info-sign" title="{{ _('Automatically power off all plugs with the option Off on Idle enabled after configured idle timeout, target tempoerature is reached, and timelapse is completed.') }}"></i>
				</label>
			</div>
		</div>
		<div class="control-group">
			<label class="control-label">{{ _('Abort Power Off Timeout') }} <i class="icon icon-info-sign" title="{{ _('Pop up will be displayed for this amount of time to allow for cancelling power off of plugs.') }}"></i></label>
			<div class="controls">
				<div class="input-append">
					<input type="number" class="input-mini text-right" data-bind="value: settings.settings.plugins.tplinksmartplug.abortTimeout, enable: settings.settings.plugins.tplinksmartplug.powerOffWhenIdle()" disabled />
					<span class="add-on">{{ _('secs') }}</span>
				</div>
			</div>
		</div>
		<div class="control-group">
			<label class="control-label">{{ _('Idle Timeout') }} <i class="icon icon-info-sign" title="{{ _('Amount of time that will lapse before printer is considered idle and plugs will be powered off.') }}"></i></label>
			<div class="controls">
				<div class="input-append">
					<input type="number" class="input-mini text-right" data-bind="value: settings.settings.plugins.tplinksmartplug.idleTimeout, enable: settings.settings.plugins.tplinksmartplug.powerOffWhenIdle() && settings.settings.plugins.tplinksmartplug.powerOffWhenIdle()" disabled />
					<span class="add-on">{{ _('mins') }}</span>
				</div>
			</div>
		</div>
		<div class="control-group">
			<label class="control-label">{{ _('Idle Target Temperature') }} <i class="icon icon-info-sign" title="{{ _('Power off will be delayed untill all heaters reach this temperature.') }}"></i></label>
			<div class="controls">
				<div class="input-append">
					<input type="number" class="input-mini text-right" data-bind="value: settings.settings.plugins.tplinksmartplug.idleTimeoutWaitTemp, enable: settings.settings.plugins.tplinksmartplug.powerOffWhenIdle() && settings.settings.plugins.tplinksmartplug.powerOffWhenIdle()" disabled />
					<span class="add-on">{{ _('degs') }}</span>
				</div>
			</div>
		</div>
		<div class="control-group">
			<label class="control-label">{{ _('GCode Commands to Ignore for Idle') }} <i class="icon icon-info-sign" title="{{ _('Comma separated list of gcode commands to ignore for determining printer idle state.') }}"></i></label>
			<div class="controls">
				<input type="text" class="input-block-level" data-bind="value: settings.settings.plugins.tplinksmartplug.idleIgnoreCommands, enable: settings.settings.plugins.tplinksmartplug.powerOffWhenIdle() && settings.settings.plugins.tplinksmartplug.powerOffWhenIdle()" disabled />
			</div>
		</div>
	</div>
</div>

<div id="TPLinkPlugEditor" data-bind="with: selectedPlug" class="modal hide fade">
	<div class="modal-header">
		<a href="#" class="close" data-dismiss="modal" aria-hidden="true">&times;</a>
		<h3>{{ _('TP-Link Smartplug Editor') }}</h3>
	</div>
	<div class="modal-body">
		<table class="table table-condensed">
			<tr>
				<td><div class="controls"><label class="control-label">{{ _('IP') }}</label><input type="text" class="input-block-level" data-bind="value: ip" /><div></td>
				<td><div class="controls"><label class="control-label">{{ _('Icon') }}</label><input type="text" class="input-block-level" data-bind="value: icon, iconpicker: icon,iconpickerOptions: {hideOnSelect: true, collision: true}" /><div></td>
				<td><div class="controls"><label class="control-label">{{ _('Label') }}</label><input type="text" class="input-block-level" data-bind="value: label" /></div></td>
			</tr>
			<tr>
				<td><div class="controls"><label class="checkbox"><input type="checkbox" data-bind="checked: displayWarning"/> {{ _('Warning Prompt') }}</label></div></td>
				<td><div class="controls"><label class="checkbox"><input type="checkbox" data-bind="checked: warnPrinting"/> {{ _('Warn While Printing') }}</label></div></td>
				<td><div class="controls"><label class="checkbox"><input type="checkbox" data-bind="checked: thermal_runaway"/> {{ _('Thermal Runaway') }}</label></div></td>
			</tr>
			<tr>
				<td><div class="controls"><label class="checkbox"><input type="checkbox" data-bind="checked: automaticShutdownEnabled"/> {{ _('Off on Idle') }}</label></div></td>
				<td><div class="controls"><label class="checkbox"><input type="checkbox" data-bind="checked: event_on_error"/> {{ _('Off on Error') }}</label></div></td>
				<td><div class="controls"><label class="checkbox"><input type="checkbox" data-bind="checked: event_on_disconnect"/> {{ _('Off on Disconnect') }}</label></div></td>
			</tr>
			<tr>
				<td><div class="controls"><label class="checkbox"><input type="checkbox" data-bind="checked: autoConnect"/> {{ _('Auto Connect') }}</label><input type="text" data-bind="value: autoConnectDelay,visible: autoConnect" class="input input-small" /></div></td>
				<td><div class="controls"><label class="checkbox"><input type="checkbox" data-bind="checked: autoDisconnect"/> {{ _('Auto Disconnect') }}</label><input type="text" data-bind="value: autoDisconnectDelay,visible: autoDisconnect" class="input input-small" /></div></td>
			</tr>
			<tr>
				<td><div class="controls"><label class="checkbox"><input type="checkbox" data-bind="checked: useCountdownRules"/> {{ _('Use Countdown Timers') }}</label></div></td>
				<td></td>
				<td></td>
			</tr>
			<tr data-bind="visible: useCountdownRules">
				<td><div class="controls"><label class="control-label">{{ _('On Delay Countdown') }}</label><input type="number" min="1" data-bind="value: countdownOnDelay" class="input input-small" /></div></td>
				<td><div class="controls"><label class="control-label">{{ _('Off Delay Countdown') }}</label><input type="number" min="1" data-bind="value: countdownOffDelay" class="input input-small" /></div></td>
				<td></td>
			</tr>
			<tr>
				<td><div class="controls"><label class="checkbox"><input type="checkbox" data-bind="checked: gcodeEnabled"/> {{ _('GCODE Trigger') }}</label></div></td>
				<td></td>
				<td></td>
			</tr>
			<tr data-bind="visible: gcodeEnabled">
				<td><div class="controls"><label class="control-label">{{ _('GCODE On Delay') }}</label><input type="number" data-bind="value: gcodeOnDelay" class="input input-small" /></div></td>
				<td><div class="controls"><label class="control-label">{{ _('GCODE Off Delay') }}</label><input type="number" data-bind="value: gcodeOffDelay" class="input input-small" /></div></td>
				<td></td>
			</tr>
			<tr>
				<td colspan="2" style="vertical-align: bottom"><div class="controls"><label class="checkbox"><input type="checkbox" data-bind="checked: sysCmdOn"/> {{ _('Run System Command After On') }}</label><input type="text" data-bind="value: sysRunCmdOn,visible: sysCmdOn" class="input-block-level" /></div></td>
				<td style="vertical-align: bottom"><div class="controls" data-bind="visible: sysCmdOn"><label class="control-label">{{ _('Delay') }}</label><input type="number" data-bind="value: sysCmdOnDelay"  class="input input-small" /></div></td>
			</tr>
			<tr>
				<td colspan="2" style="vertical-align: bottom"><div class="controls"><label class="checkbox"><input type="checkbox" data-bind="checked: sysCmdOff"/> {{ _('Run System Command Before Off') }}</label><input type="text" data-bind="value: sysRunCmdOff,visible: sysCmdOff" class="input-block-level" /></div></td>
				<td style="vertical-align: bottom"><div class="controls" data-bind="visible: sysCmdOff"><label class="control-label">{{ _('Delay') }}</label><input type="number" data-bind="value: sysCmdOffDelay"  class="input input-small" /></div></td>
			</tr>
		</table>
	</div>
	<div class="modal-footer">
		<a href="#" class="btn" data-dismiss="modal" aria-hidden="true">{{ _('Close') }}</a>
	</div>
</div>
